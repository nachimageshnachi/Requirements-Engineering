@startuml
skinparam monochrome true
skinparam activity {
  BackgroundColor White
  BorderColor Black
}

|Signaling|
:Detect train;
:Provide train approach information;

|Control Center (SOI – Focus)|
start
:Receive train approach information;
:Validate information freshness;
:Assess crossing risk;

if (Crossing protection required?) then (yes)
  :Command activation of crossing protection;
else (no)
  :Continue monitoring;
  stop
endif

|Train Station|
:Execute protection activation;
:Send CLOSE command to gate;
:Activate warning lights & bell;

|Gate (External Infrastructure)|
:Gate arms lowering;
:Gate fully closed;

|Train Station|
:Receive gate closed status;
:Report gate closed status;

|Control Center (SOI – Focus)|
:Receive gate closed status;
if (Crossing secured?) then (yes)
  :Authorize crossing traversal;
else (no)
  :Abort crossing;
  stop
endif

:Monitor crossing traversal;
:Confirm crossing cleared;
:Command release of crossing protection;

|Train Station| 
:Deactivate warning lights & bell;
:Send OPEN command to gate;

|Gate (External Infrastructure)|
:Gate arms raising;
:Gate fully open;

|Train Station|
:Receive gate open status;
:Report gate open status;

|Control Center (SOI – Focus)|
:Receive gate open status;
:Resume normal operation;
stop
@enduml
